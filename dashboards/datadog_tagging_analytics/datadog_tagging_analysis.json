{"title":"Datadog Tagging Analysis","description":"This dashboard provides a high level overview of the tag consistency in infrastructure, logs, application traces and Datadog resources such as Synthetics, RUM or Monitors. These are critical for multiple use cases: \n* connect different Datadog products to enhance correlatio of metrics and events, \n* ease discoverability on any context or business related aggregation (`team`, `business_unit`, `owner`)\n* allocate cost and attribute usage\n\n## Disclaimer\n\nThis is a community contributed dashboard and not supported by Datadog. For any change request or issues, follow our [contributing guidelines](https://github.com/DataDog/effective-dashboards/blob/main/CONTRIBUTING.md).\n\nAll the information provided here have been copied from the doc at a specific date and are here for indications. They are subject to changes, please refer to the link provided for official information.","widgets":[{"id":1171036249909452,"definition":{"type":"note","content":"# Tagging Analytics\n\nTagging is critical for multiple use cases:\n- connect products ([unified service tagging](https://docs.datadoghq.com/getting_started/tagging/unified_service_tagging/))\n- ease search on any context (team, service, etc.)\n- allocate costs\n\nThis dashboard needs to be adapted to each customer:\n1. Export the dashboard JSON\n2. Find and replace `cost_center` with your own tag for cost allocation, eg: `business_unit`, `workload`, `project_id`...\n3. Find and replace `team` with customer own tag for ownership, e.g: `squad`, `owner`,...\n4. Import back the dashboard JSON into the customer org","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":7,"height":4}},{"id":4972825294149556,"definition":{"type":"image","url":"https://imgix.datadoghq.com/img/about/presskit/logo-v/dd_vertical_white.png?auto=format&fit=max&w=847","sizing":"zoom"},"layout":{"x":7,"y":0,"width":3,"height":4}},{"id":926469318290536,"definition":{"title":"RUM :: Tag Analytics","type":"group","background_color":"blue","show_title":true,"layout_type":"ordered","widgets":[{"id":7134149105837496,"definition":{"type":"note","content":"# RUM Tags\n\n- `env` and `service` are two technical tags\n- `team` and `cost_center` could be added as a global context for cost allocation and filter on your apps.\n    - [Add global context on browser RUM](https://docs.datadoghq.com/real_user_monitoring/browser/modifying_data_and_context/?tab=npm#add-global-context)\n    - [Add global context on Android RUM](https://docs.datadoghq.com/real_user_monitoring/android/advanced_configuration/?tab=kotlin#track-attributes)\n     - [Add global context on iOS RUM](https://docs.datadoghq.com/real_user_monitoring/ios/advanced_configuration/?tab=swift#set-a-custom-global-attribute)\n     - [Add global context on React Native RUM](https://docs.datadoghq.com/real_user_monitoring/reactnative/#global-attributes)\n     - [Add global context on Flutter RUM - TODO](#)\n     - [Connect RUM and Traces](https://docs.datadoghq.com/real_user_monitoring/connect_rum_and_traces/)\n\nNote: The business tags added have to be added as a facet.\n\nRecommendation: On the graphs below, select the largest `N/A` areas and add the relevant tags or global context accordingly.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":8687651578660952,"definition":{"title":"No env tag","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session -env:* $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[]}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":4,"y":0,"width":2,"height":2}},{"id":4886714235975106,"definition":{"title":"Top env tags","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Sessions","limit":{"count":10,"order":"desc"},"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[{"facet":"env","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":6295973216100728,"definition":{"title":"No service tag","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session -service:* $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[]}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":8,"y":0,"width":2,"height":2}},{"id":6736069560961134,"definition":{"title":"Top service tags","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"sessions","limit":{"count":10,"order":"desc"},"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":10,"y":0,"width":2,"height":2}},{"id":1327356817643970,"definition":{"title":"No team tag","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session -@team:* $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[]}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":4,"y":2,"width":2,"height":2}},{"id":1200411675320210,"definition":{"title":"Top team facets","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"sessions","limit":{"count":10,"order":"desc"},"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[{"facet":"@team","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":6,"y":2,"width":2,"height":2}},{"id":8764958622936356,"definition":{"title":"No cost_center tag","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session -@cost_center:* $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[]}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":8,"y":2,"width":2,"height":2}},{"id":4117466983644480,"definition":{"title":"Top cost_center facets","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"sessions","limit":{"count":10,"order":"desc"},"formula":"query2"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session -@cost_center:* $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query2","indexes":["*"],"group_by":[{"facet":"@cost_center","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":10,"y":2,"width":2,"height":2}},{"id":8565157320240678,"definition":{"title":"Services by env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"env","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":0,"y":4,"width":4,"height":5}},{"id":2977213793783366,"definition":{"title":"Services by team ","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"@team","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":4,"y":4,"width":4,"height":5}},{"id":5457178088371096,"definition":{"title":"Services by cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"@type:session $env $service $at_team $at_cost_center"},"data_source":"rum","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"@cost_center","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":8,"y":4,"width":4,"height":5}}]},"layout":{"x":0,"y":4,"width":12,"height":10}},{"id":2963309415065870,"definition":{"title":"APM :: Tag Analytics","type":"group","background_color":"purple","show_title":true,"layout_type":"ordered","widgets":[{"id":2658922068180188,"definition":{"type":"note","content":"# APM Tags\n\n- `env`, `version` and `service` are three technical tags\n- `team` and `cost_center` could be added as default tags on all deployment through the `DD_TAGS` environment variable.\n- [Connect Logs and Traces](https://docs.datadoghq.com/tracing/connect_logs_and_traces/)\n- [Connect RUM and Traces](https://docs.datadoghq.com/real_user_monitoring/connect_rum_and_traces/)\n\n\nRecommendation: On the graphs below, select the largest `N/A` areas and add the relevant tags or global context accordingly.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":7,"height":3}},{"id":1565793098416576,"definition":{"type":"note","content":"","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":0,"width":5,"height":3}},{"id":473607104150620,"definition":{"type":"note","content":"## Main APM tags\n\nRecommendation: Make sure that `env` and `service` are not default and that each service has a unique name.\n\nCommon pitfall: Use the `DD_SERVICE_MAPPING` environment variable to uniquely name your databases or other auto instrumented services. [Doc per language](https://docs.datadoghq.com/search/?s=DD_SERVICE_MAPPING)","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":3,"width":2,"height":3}},{"id":7789291141649176,"definition":{"title":"Metric ...apm.ingested_bytes by service and env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes{$env,$service} by {service,env}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":2,"y":3,"width":5,"height":3}},{"id":1598908708499440,"definition":{"title":"Metric ...apm.indexed_spans by service and env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.indexed_spans{$env,$service} by {service,env}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":7,"y":3,"width":5,"height":3}},{"id":1335922813794582,"definition":{"type":"note","content":"## Host based tags\n\n*Those recommendations have to be adjusted in the case of a shared cluster.*\n\nAs much as possible, add at a host level the tags `cost_center` and `team`.\n\nRecommendation: On the graphs on the right, select the largest `N/A` areas and add the relevant tags or global context accordingly.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":6,"width":2,"height":3}},{"id":1297797939685116,"definition":{"title":"Metric ...apm.ingested_bytes.by_tag by team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes.by_tag{$team,$cost_center,$service} by {service,team}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":2,"y":6,"width":5,"height":3}},{"id":4589009662073200,"definition":{"title":"Metric ...apm.ingested_bytes_by_host by cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes_by_host{$env,$team,$cost_center} by {cost_center}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":7,"y":6,"width":5,"height":3}},{"id":6634938886187136,"definition":{"type":"note","content":"## Custom APM service tags\n\n*Enterprise customers only*\n\nRecommendation: Make sure that `team` and `cost_center` are available on all ingested spans. Use the environment variable `DD_TAGS` or similar to add those tags at the SDK level\n\nNote: For enterprise customers, those metrics `by_tag` can be requested to our support `help.datadoghq.com`. Two tags can be requested as long as the cardinality is not too high. `team` and `cost_center` should be good.\n\n","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":9,"width":2,"height":3}},{"id":5487327907163944,"definition":{"title":"Metric ...apm.ingested_bytes_by_host by team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes_by_host{$env,$team,$cost_center} by {team}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":2,"y":9,"width":5,"height":3}},{"id":5830075507580994,"definition":{"title":"Metric ...apm.ingested_bytes.by_tag by cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes.by_tag{$team,$cost_center,$service} by {service,cost_center}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":7,"y":9,"width":5,"height":3}},{"id":382215206393476,"definition":{"type":"note","content":"## Service Mapping\n\nEach service should have a unique name. Make sure to use `DD_SERVICE_MAPPING` environment variable to uniquely name your databases or other auto instrumented services. [Doc per language](https://docs.datadoghq.com/search/?s=DD_SERVICE_MAPPING)\n\nNote: The list on the right is not exhaustive","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":12,"width":2,"height":3}},{"id":7149949870376898,"definition":{"title":"Non remapped services","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"bytes","conditional_formats":[],"limit":{"count":500,"order":"desc"},"cell_display_mode":"bar","formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes{service IN (mongodb,redis,redisdb,mysql,postgresql,postgres,pdo)} by {service}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"has_search_bar":"auto"},"layout":{"x":2,"y":12,"width":3,"height":3}},{"id":8162000533877004,"definition":{"type":"note","content":"## Version\n\nEach service should have version. Make sure to use `DD_VERSION` environment variable. [Docs](https://docs.datadoghq.com/search/?s=DD_VERSION)\n\nThis helps connect different product in Datadog, helps alert on faulty deployments and more.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":5,"y":12,"width":2,"height":3}},{"id":3438882477214810,"definition":{"title":"Indexed spans by service and version","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":""},"data_source":"spans","compute":{"aggregation":"count"},"name":"query1","indexes":["trace-search"],"group_by":[{"facet":"@service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"@version","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":7,"y":12,"width":3,"height":3}},{"id":913729230487946,"definition":{"title":"Services without version","type":"query_table","requests":[{"formulas":[{"alias":"indexed spans","limit":{"count":10,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"-@version:* -version:*"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query1","indexes":["trace-search"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":10,"y":12,"width":2,"height":3}}]},"layout":{"x":0,"y":14,"width":12,"height":16}},{"id":5112462380750186,"definition":{"title":"Logs :: Tag Analytics","type":"group","background_color":"orange","show_title":true,"layout_type":"ordered","widgets":[{"id":5128812081521194,"definition":{"type":"note","content":"# Log Tags\n\n- `env`, `source`, `status` and `service` are four technical tags\n- `team` and `cost_center` could be added as default tags on all deployment to make sure they are attached to each log.\n- [Connect Logs and Traces](https://docs.datadoghq.com/tracing/connect_logs_and_traces/)\n- [Connect RUM and Traces](https://docs.datadoghq.com/real_user_monitoring/connect_rum_and_traces/)\n\n\nRecommendation: On the graphs below, select the largest `N/A` areas and add the relevant tags or global context accordingly.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":7,"height":3}},{"id":3408819376117042,"definition":{"type":"note","content":"","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":0,"width":5,"height":3}},{"id":5012982779874080,"definition":{"type":"note","content":"## Main Log tags\n\nRecommendation: Make sure that `env`, `service`, `source` and `status` are populated.\n\nNote: The `env` tag often comes from the underlying host.\n\nNote: The `status` tag can be mapped with a [log status remapper](https://docs.datadoghq.com/logs/log_configuration/processors/?tab=ui#log-status-remapper)","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":3,"width":2,"height":6}},{"id":4971700982390524,"definition":{"title":"No source tag by service","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"-source:* $env $team $service $cost_center"},"data_source":"logs","compute":{"metric":"service","aggregation":"cardinality"},"name":"query1","indexes":["*"],"group_by":[]}]}],"autoscale":true,"precision":2},"layout":{"x":2,"y":3,"width":2,"height":3}},{"id":4712753360098522,"definition":{"title":"No env tag by service","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"search":{"query":"-env:* $env $team $service $cost_center"},"data_source":"logs","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":4,"y":3,"width":2,"height":3}},{"id":6553254452847076,"definition":{"title":"No status tag by service","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"search":{"query":"-status:* $env $team $service $cost_center"},"data_source":"logs","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":6,"y":3,"width":2,"height":3}},{"id":8145603947503414,"definition":{"title":"Logs by service and source","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"$env $team $service $cost_center"},"data_source":"logs","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"source","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":8,"y":3,"width":4,"height":3}},{"id":6175114978531878,"definition":{"title":"Logs by service and env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"$env $team $service $cost_center"},"data_source":"logs","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"env","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":2,"y":6,"width":5,"height":3}},{"id":6894605873876134,"definition":{"title":"Logs by service and status","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"$env $team $service $cost_center"},"data_source":"logs","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"status","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":7,"y":6,"width":5,"height":3}},{"id":4424001727316812,"definition":{"type":"note","content":"## Additional log service tags\n\n*Enterprise customers only*\n\nRecommendation: Make sure that `team`, `cost_center` and `status` are available on all ingested logs. Use the environment variable `DD_TAGS` or similar to add those tags at the log collection level.\n\nNote: Those tags are recommended to be tags and not facets. To map a facet to a tag, use a [remapper](https://docs.datadoghq.com/logs/log_configuration/processors/?tab=ui#remapper)","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":9,"width":2,"height":6}},{"id":7686693734575066,"definition":{"title":"No cost_center tag by service","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"search":{"query":"-cost_center:* $env $team $service $cost_center"},"data_source":"logs","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":2,"y":9,"width":2,"height":3}},{"id":791966788589262,"definition":{"title":"Metric ...logs.ingested_events by service and status","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.logs.ingested_events{$service} by {service,status}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":7,"y":9,"width":5,"height":3}},{"id":2433370687569488,"definition":{"title":"Logs by service and cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"$env $team $service $cost_center"},"data_source":"logs","compute":{"aggregation":"count"},"name":"query1","indexes":["*"],"group_by":[{"facet":"service","sort":{"aggregation":"count","order":"desc"},"limit":10},{"facet":"cost_center","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}]},"layout":{"x":2,"y":12,"width":5,"height":3}},{"id":597498691710592,"definition":{"title":"Metric ...logs.ingested_events.team by service and team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.logs.ingested_events.team{$service,$team} by {service,team}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":7,"y":12,"width":5,"height":3}}]},"layout":{"x":0,"y":30,"width":12,"height":16}},{"id":627967523909392,"definition":{"title":"Monitors :: Tag Analytics","type":"group","background_color":"orange","show_title":true,"layout_type":"ordered","widgets":[{"id":5073474141036854,"definition":{"type":"note","content":"# Monitor Tags\n\nTagging monitors is important. It does not affect the behavior of the monitor but it help the platform connect objects and help organize the content. Highly recommended tags\n\n    - team\n    - env\n    - service\n    - terraform:true\n    - priority\n","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":5297015051177218,"definition":{"title":"No team tag","title_size":"13","title_align":"left","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"-team:* $env $team $service *","sort":"priority,asc","count":50,"start":0,"summary_type":"combined","show_priority":true,"show_last_triggered":true},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":7040630074832546,"definition":{"title":"No env tag","title_size":"13","title_align":"left","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"-env:* $env $team $service *","sort":"priority,asc","count":50,"start":0,"summary_type":"combined","show_priority":true,"show_last_triggered":true},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":2355390249011156,"definition":{"title":"Tagged with `terraform:true`","title_size":"13","title_align":"left","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"tag:(terraform:true) $env $team $service *","sort":"priority,asc","count":50,"start":0,"summary_type":"combined","show_priority":true,"show_last_triggered":true},"layout":{"x":0,"y":4,"width":4,"height":4}},{"id":8056729182741220,"definition":{"title":"No service tag","title_size":"13","title_align":"left","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"-service:* $env $team $service *","sort":"priority,asc","count":50,"start":0,"summary_type":"combined","show_priority":true,"show_last_triggered":true},"layout":{"x":4,"y":4,"width":4,"height":4}},{"id":7249607658069544,"definition":{"title":"Priority not defined and notification set","title_size":"13","title_align":"left","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"priority:not_defined notification:* $env $team $service *","sort":"priority,asc","count":50,"start":0,"summary_type":"combined","show_priority":true,"show_last_triggered":true},"layout":{"x":8,"y":4,"width":4,"height":4}}]},"layout":{"x":0,"y":46,"width":12,"height":9}},{"id":1449274141276640,"definition":{"title":"Container :: Tag Analytics","type":"group","background_color":"green","show_title":true,"layout_type":"ordered","widgets":[{"id":6481138130389638,"definition":{"type":"note","content":"# Container Tags\n\n- `env`, `service` and `version` are three technical tags to support connection between data sources thanks to the [Unified Service Tagging](https://docs.datadoghq.com/getting_started/tagging/unified_service_tagging/)\n- `team` and `cost_center` could be added as default tags on each Kubernetes object. Follow the doc above for similar an example or this [tag autodiscovery doc](https://docs.datadoghq.com/agent/kubernetes/tag/?tab=containerizedagent#tag-autodiscovery)\n\nRecommendation: On the graphs below, select the largest `N/A` areas and add the relevant tags or global context accordingly.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":1761638232256302,"definition":{"title":"Containers by service","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.containers.running{$env,$cost_center,$team,$service} by {service}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":228707794879056,"definition":{"title":"Containers by service and env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.containers.running{$env,$team,$service,$cost_center} by {service,env}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":772951522411578,"definition":{"title":"Containers by service and team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.containers.running{$env,$team,$service,$cost_center} by {service,team}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":0,"y":4,"width":4,"height":4}},{"id":3544264037294912,"definition":{"title":"Containers by service and cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.containers.running{$env,$team,$service,$cost_center} by {service, cost_center}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":4,"y":4,"width":4,"height":4}},{"id":5271000740274350,"definition":{"title":"Containers by service and version","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.containers.running{$env,$team,$service,$cost_center} by {service,version}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":4,"width":4,"height":4}}]},"layout":{"x":0,"y":55,"width":12,"height":1,"is_column_break":true}},{"id":5376244313068886,"definition":{"title":"Synthetics :: Tag Analytics","type":"group","background_color":"gray","show_title":true,"layout_type":"ordered","widgets":[{"id":8934409694202612,"definition":{"type":"note","content":"# Synthetics Tags\n\n- `env` and `service` are two technical tags\n- `team` and `cost_center` are business tags to organize those tests.\n- [Connect Synthetic Tests and Traces](https://docs.datadoghq.com/synthetics/apm/)\n\nRecommendation: On the graphs below, select the largest `N/A` areas and add the relevant tags or global context accordingly.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":7,"height":3}},{"id":7482482084835880,"definition":{"type":"note","content":"","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":0,"width":5,"height":3}},{"id":1703039037032578,"definition":{"title":"Metrics ...synthetics.api_test_runs by env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.api_test_runs{$env,$team,$cost_center,$service} by {env}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":0,"y":3,"width":3,"height":5}},{"id":8297441300606172,"definition":{"title":"Metrics ...synthetics.api_test_runs by service","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.api_test_runs{$env,$team,$cost_center,$service} by {service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":3,"y":3,"width":3,"height":5}},{"id":8722229227365528,"definition":{"title":"Metrics ...synthetics.api_test_runs by team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.api_test_runs{$env,$team,$cost_center,$service} by {team}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":6,"y":3,"width":3,"height":5}},{"id":8991771856868936,"definition":{"title":"Metrics ...synthetics.api_test_runs by team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.api_test_runs{$env,$team,$cost_center,$service} by {cost_center}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":9,"y":3,"width":3,"height":5}},{"id":4086200960556516,"definition":{"title":"Metrics ...synthetics.browser_test_runs by env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.browser_test_runs{$env,$team,$cost_center,$service} by {env}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":0,"y":8,"width":3,"height":5}},{"id":1294752088046498,"definition":{"title":"Metrics ...synthetics.browser_test_runs by service","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.browser_test_runs{$env,$team,$cost_center,$service} by {service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":3,"y":8,"width":3,"height":5}},{"id":2086177432091392,"definition":{"title":"Metrics ...synthetics.browser_test_runs by team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.api_test_runs{$env,$team,$cost_center,$service} by {team}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":6,"y":8,"width":3,"height":5}},{"id":4419162055636158,"definition":{"title":"Metrics ...synthetics.browser_test_runs by cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.synthetics.browser_test_runs{$env,$team,$cost_center,$service} by {cost_center}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":9,"y":8,"width":3,"height":5}}]},"layout":{"x":0,"y":56,"width":12,"height":1}},{"id":8457522380448300,"definition":{"title":"Custom Metrics :: Tag Analytics (Enterprise only)","type":"group","background_color":"purple","show_title":true,"layout_type":"ordered","widgets":[{"id":3752893390104014,"definition":{"title":"Custom metric volume without team or service","type":"query_value","requests":[{"formulas":[{"formula":"query1 - query2"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.metrics.custom{*}","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:datadog.estimated_usage.metrics.custom.by_tag{*}","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":504981714348504,"definition":{"title":"Custom metric volume without team","type":"query_value","requests":[{"formulas":[{"formula":"query1 - query2"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.metrics.custom{*}","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:datadog.estimated_usage.metrics.custom.by_tag{team:*}","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":1923828416788018,"definition":{"title":"Custom metric volume without service ","type":"query_value","requests":[{"formulas":[{"formula":"query1 - query2"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.metrics.custom{*}","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:datadog.estimated_usage.metrics.custom.by_tag{service:*}","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":9007027331574546,"definition":{"type":"note","content":"## Custom Metric volume tags\n\n*Enterprise customers only*\n\nRecommendation: Make sure that `team`, `cost_center` and `service` (if possible) are available on all incoming metrics.\n\nNote: For enterprise customers, that metric `by_tag` can be requested to our support `help.datadoghq.com`. Two tags can be requested as long as the cardinality is not too high. `team` and `service` should be good. The `team` tag helps have a overall tracker for each team and the `service` tag helps to narrow down the search.\n\n","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":2,"width":2,"height":4}},{"id":7001859820603320,"definition":{"title":"Metric ...metrics.custom.by_tag by team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.metrics.custom.by_tag{$team,$service} by {team}","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":2,"y":2,"width":5,"height":4}},{"id":1014795857739792,"definition":{"title":"Metric ...metrics.custom.by_tag by service","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.metrics.custom.by_tag{$team,$service} by {service}","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":7,"y":2,"width":5,"height":4}}]},"layout":{"x":0,"y":57,"width":12,"height":1}},{"id":298429871567254,"definition":{"title":"Host :: Tag Analytics","type":"group","background_color":"blue","show_title":true,"layout_type":"ordered","widgets":[{"id":1411595498491340,"definition":{"title":"Agents per env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.agent.running{*} by {env}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":8642938567368284,"definition":{"title":"Agent runnings per team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.agent.running{*} by {team}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":6181939659020420,"definition":{"title":"Agent runnings per cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.agent.running{*} by {cost_center}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":0,"width":4,"height":4}}]},"layout":{"x":0,"y":58,"width":12,"height":1}},{"id":884108174078978,"definition":{"title":"Serverless :: Tag Analytics","type":"group","background_color":"pink","show_title":true,"layout_type":"ordered","widgets":[{"id":8991479784826006,"definition":{"title":"Lambda invocations by service and env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.lambda.invocations{*} by {service,env}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":3445316475998940,"definition":{"title":"API GW by service and team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.apigateway.count{*} by {service,team}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":8639996458537942,"definition":{"title":"Lambda invocations by service and cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.lambda.invocations{*} by {service,cost_center}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":2606271443581110,"definition":{"title":"Azure webservers by service and env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:azure.web_serverfarms.count{*} by {service,env}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":0,"y":4,"width":4,"height":4}},{"id":4889531336988188,"definition":{"title":"Azure webservers by service and team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:azure.web_serverfarms.count{*} by {service,team}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":4,"y":4,"width":4,"height":4}},{"id":4406022521455722,"definition":{"title":"Azure webservers by service and cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:azure.web_serverfarms.count{*} by {service,cost_center}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":4,"width":4,"height":4}},{"id":3653473537231530,"definition":{"title":"Azure functions requests by service and env","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:azure.functions.requests{*} by {service,env}","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":0,"y":8,"width":4,"height":4}},{"id":8109920345628564,"definition":{"title":"Azure functions requests by service and team","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:azure.functions.requests{*} by {service,team}","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":4,"y":8,"width":4,"height":4}},{"id":2617682918852936,"definition":{"title":"Azure functions requests by service and cost_center","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:azure.functions.requests{*} by {service,cost_center}","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":8,"y":8,"width":4,"height":4}}]},"layout":{"x":0,"y":59,"width":12,"height":13}}],"template_variables":[{"name":"env","default":"*","prefix":"env","available_values":[]},{"name":"at_team","default":"*","prefix":"@team","available_values":[]},{"name":"team","default":"*","prefix":"team","available_values":[]},{"name":"at_cost_center","default":"*","prefix":"@cost_center","available_values":[]},{"name":"cost_center","default":"*","prefix":"cost_center","available_values":[]},{"name":"service","default":"*","prefix":"service","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"fixed","id":"3js-ujr-rz7"}