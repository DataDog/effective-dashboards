{"title":"Cloud Optimization - AWS EC2","description":"### Purpose:\nThis dashboard has been designed to help evaluate AWS EC2 usage for potential optimization.\n\n### Approach:\nOptimizing EC2 usage can be a complex process of performance tests and a good understanding of how your instances are billed. This dashboard can be helpful to identify potential areas for improvement.\n\nThese widgets focus on CPU and memory utilization of EC2 instances. The metrics are grouped by the instance type, host, and autoscaling group. This allows for comparison of resource usage or what is **not** being used.\n\n### Use:\nTemplate variables at the top of the dashboard can be used to filter results to a specific AWS account, region, etc.\nUnless stated in the title, widgets will use the global time from the time picker. It's best to look at this data over longer periods of time (2+ days) to get an idea of performance over time rather than how an instance is performing right now.\n\n### Additional resources:\n* [AWS: Instance types](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html)\n* [AWS: Optimizing your cost with Rightsizing Recommendations](https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/ce-rightsizing.html)\n* [Blog: How to find an optimal EC2 configuration in 5 steps](https://www.concurrencylabs.com/blog/5-steps-for-finding-optimal-ec2-infrastructure/)\n\n##Disclaimer\nThis is a community contributed dashboard and not supported by Datadog. For any change request or issues, follow our [contributing guidelines](https://github.com/DataDog/effective-dashboards/blob/main/CONTRIBUTING.md)","widgets":[{"id":7637912971219520,"definition":{"title":"CPU and memory utilization","type":"group","background_color":"blue","show_title":true,"layout_type":"ordered","widgets":[{"id":741095001077776,"definition":{"type":"note","content":"## EC2 max and average CPU utilization\nFocusing on the average and max CPU utilization by instance type can help identify instances that are being underutilized. It's also important to look out for instance that are running *hot* at 90-100%. This can indicate that an application may not have enough resources. This can lead to reduced response time, increased errors, or crashes. \n\nThe EC2 max and average CPU utilization widgets will highlight usage **<= 30%** and **>= 90%** to help identify under and over-utilization.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"bottom","has_padding":true},"layout":{"x":0,"y":0,"width":6,"height":1}},{"id":2209841807085358,"definition":{"type":"note","content":"## Compare CPU and Memory\nThis scatter plot shows the CPU and memory utilization by host and instance type. Each instance type will use the same color to easily identify resource usage by instance type.\n\nThe Y-axis designates memory and is on a Log scale. This helps to separate clusters of hosts which use low amounts of memory.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":6,"y":0,"width":6,"height":1}},{"id":2847240168604052,"definition":{"title":"EC2 average CPU utilization","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"comparator":"<=","palette":"white_on_red","value":30},{"comparator":">=","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.cpuutilization{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":0,"y":1,"width":3,"height":3}},{"id":3571073436622168,"definition":{"title":"EC2 max CPU utilization","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"comparator":"<=","palette":"white_on_red","value":30},{"comparator":">=","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"max:aws.ec2.cpuutilization.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":3,"y":1,"width":3,"height":3}},{"id":1867097447635604,"definition":{"title":"Compare CPU and memory utilization grouped by host/instance-type","title_size":"16","title_align":"left","type":"scatterplot","requests":{"table":{"formulas":[{"alias":"CPU utilization %","dimension":"x","formula":"query1"},{"alias":"Memory utilization log scale","dimension":"y","formula":"query2"}],"response_format":"scalar","queries":[{"query":"max:aws.ec2.cpuutilization.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query1","aggregator":"max"},{"query":"max:system.mem.used{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query2","aggregator":"max"}]}},"xaxis":{"include_zero":false},"yaxis":{"include_zero":false,"scale":"log"},"color_by_groups":["instance-type"]},"layout":{"x":6,"y":1,"width":6,"height":3}},{"id":2323568884818474,"definition":{"type":"note","content":"## Max CPU utilization by instance type and host - past week:\n\nSometimes it helps to view performance over time. These 2 widgets help to visualize the Max CPU utilization by instance type and host separately over the past week.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":4,"width":12,"height":1}},{"id":4753562361926668,"definition":{"title":"Max CPU utilization by instance-type - past week","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"max:aws.ec2.cpuutilization{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false,"scale":"sqrt"},"markers":[{"label":" Review to optimize, max CPU below 30% ","value":"0 < y < 30","display_type":"info solid"},{"label":" Review to optimize, max CPU above 90% ","value":"90 < y < 100","display_type":"info solid"}]},"layout":{"x":0,"y":5,"width":6,"height":3}},{"id":4847093392734056,"definition":{"title":"Max CPU utilization by host - past week","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"max:aws.ec2.cpuutilization{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"sqrt"},"markers":[{"label":" Review to optimize, max CPU below 30% ","value":"0 < y < 30","display_type":"info solid"},{"label":" Review to optimize, max CPU above 90% ","value":"90 < y < 100","display_type":"info solid"}]},"layout":{"x":6,"y":5,"width":6,"height":3}},{"id":2224690099659446,"definition":{"title":"EC2 max CPU utilization (Orange Low / Green High)","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"max:aws.ec2.cpuutilization.maximum{$aws_account,$availability-zone,$env,$instance-type,$service,$team,$host} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"group":["instance-type"],"scope":["$aws_account","$availability-zone","$env","$instance-type","$service","$team","$host"],"style":{"palette":"green_to_orange","palette_flip":true}},"layout":{"x":0,"y":8,"width":12,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":12}},{"id":5224587382694050,"definition":{"title":"Host count and Network traffic","type":"group","background_color":"green","show_title":true,"layout_type":"ordered","widgets":[{"id":6436335842028240,"definition":{"type":"note","content":"## Host count\nThis count section shows the min and max instances for the last day along with a list of how many instances are using each instance type.\n\nThis count section can help identify the amount of elasticity of instances. A high rate of change may be an indication of instances running *hot*. Conversely, no change can be signs of underutilized instances.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"bottom","has_padding":true},"layout":{"x":0,"y":0,"width":2,"height":1}},{"id":6502127296278136,"definition":{"type":"note","content":"## Network traffic\nCPU and memory are not the only metrics to focus on when reviewing utilization. Here we see the in/out network traffic by instance type.\nBelow is a combination of in/out network traffic. Expand the widget to full screen for a breakdown of each instance type.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"bottom","has_padding":true},"layout":{"x":2,"y":0,"width":4,"height":1}},{"id":2965394379712150,"definition":{"title":"AWS EC2 Network max combined in/out (bottom 10)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","sum"],"type":"timeseries","requests":[{"q":"top(max:aws.ec2.network_in.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}, 10, 'max', 'asc'), top(max:aws.ec2.network_out.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}, 10, 'max', 'asc'), top(max:aws.ec2.network_in.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}, 10, 'max', 'asc')+top(max:aws.ec2.network_out.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}, 10, 'max', 'asc')","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":6,"y":0,"width":6,"height":4}},{"id":7499287912368430,"definition":{"title":"Max EC2 instances - past day","title_size":"13","title_align":"left","time":{"live_span":"1d"},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.host_ok{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}.rollup(max)","data_source":"metrics","name":"query1","aggregator":"max"}]}],"autoscale":true,"text_align":"center","precision":2},"layout":{"x":0,"y":1,"width":1,"height":1}},{"id":4917000805855378,"definition":{"title":"Min EC2 instances - past day","title_size":"13","title_align":"left","time":{"live_span":"1d"},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.host_ok{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}.rollup(min)","data_source":"metrics","name":"query1","aggregator":"min"}]}],"autoscale":true,"text_align":"center","precision":2},"layout":{"x":1,"y":1,"width":1,"height":1}},{"id":7165612393299820,"definition":{"title":"Network in by instance type (bottom 50)","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.network_in.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}","data_source":"metrics","name":"query1","aggregator":"max"}]}]},"layout":{"x":2,"y":1,"width":2,"height":3}},{"id":8949571255464054,"definition":{"title":"Network out by instance type (bottom 50)","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.network_out.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}","data_source":"metrics","name":"query1","aggregator":"max"}]}]},"layout":{"x":4,"y":1,"width":2,"height":3}},{"id":702977858057142,"definition":{"title":"Max instances by instance type","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.host_ok{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}","data_source":"metrics","name":"query1","aggregator":"max"}]}]},"layout":{"x":0,"y":2,"width":2,"height":2}}]},"layout":{"x":0,"y":12,"width":12,"height":5}},{"id":8020108353487222,"definition":{"title":"Instance performance and autoscaling","type":"group","background_color":"orange","show_title":true,"layout_type":"ordered","widgets":[{"id":8839700185015122,"definition":{"type":"note","content":"## Focus on instance-type performance\nThese heat maps will show the CPU utilization of the instance type for the past week. These widgets are meant to be used along with *Template variables*. \n\nUse the *Template variables* above to focus on a specific instance or group instances by another value like service.\n\nA specific instance can also be set by clicking in a widget broken down by instance type and setting *Template variables*.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":6,"height":1}},{"id":5344960675759116,"definition":{"type":"note","content":"## Autoscaling\nThe Autoscaling breakdown helps to identify optimization by scaling groups.\n\n* Does the group have large instances which aren't scaling?\n* Is the group at its host limit with high CPU utilization?\n\nThese are areas for review to determine if the scaling group and its instances are optimized.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":6,"y":0,"width":6,"height":1}},{"id":8074797598816818,"definition":{"title":"$instant-type average CPU utilization - past week","title_size":"16","title_align":"left","show_legend":false,"time":{"live_span":"1w"},"type":"heatmap","requests":[{"q":"max:aws.ec2.cpuutilization{*,*,*,*,*,*,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {instance-type}","style":{"palette":"dog_classic"}}]},"layout":{"x":0,"y":1,"width":6,"height":3}},{"id":960609608191246,"definition":{"title":"AWS Autoscaling group CPU utilization","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"host count","cell_display_mode":"number","formula":"exclude_null(query1)"},{"alias":"AWS Max CPU","conditional_formats":[{"palette":"red_on_white","comparator":"<=","value":30},{"palette":"red_on_white","comparator":">=","value":90}],"limit":{"count":500,"order":"desc"},"cell_display_mode":"bar","formula":"exclude_null(query2)"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.host_ok{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {aws_autoscaling_groupname,instance-type}","data_source":"metrics","name":"query1","aggregator":"max"},{"query":"max:aws.ec2.cpuutilization.maximum{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {aws_autoscaling_groupname,instance-type}","data_source":"metrics","name":"query2","aggregator":"max"}]}],"has_search_bar":"auto"},"layout":{"x":6,"y":1,"width":6,"height":6}},{"id":3382924466498194,"definition":{"title":"$instance-type average CPU utilization - past week","title_size":"16","title_align":"left","show_legend":false,"time":{"live_span":"1w"},"type":"heatmap","requests":[{"q":"max:aws.ec2.cpuutilization{$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host}","style":{"palette":"dog_classic"}}]},"layout":{"x":0,"y":4,"width":6,"height":3}}]},"layout":{"x":0,"y":17,"width":12,"height":8,"is_column_break":true}},{"id":8071734550838288,"definition":{"title":"Host performance","type":"group","background_color":"purple","show_title":true,"layout_type":"ordered","widgets":[{"id":7925022255198996,"definition":{"type":"note","content":"## Focus on host system performance\n\nThese widgets will show host performance for that host or group of hosts for the past day. These widgets are meant to be used along with *Template variables*. \n\nUse the *Template variables* above to focus on a specific host or group hosts by another value like service.\n\nA specific host can also be set by clicking in the **Host list breakdown table** and setting *Template variables*.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":6,"height":1}},{"id":6725598249350140,"definition":{"type":"note","content":"## Host list breakdown table\nThe host lit breakdown table shows a list of the bottom 100 hosts based on max CPU utilization. Additional performance metrics are included as well. \n\nClick on a specific host and choose *Template variables* to filter the dashboard to a specific host.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"25%","tick_edge":"bottom","has_padding":true},"layout":{"x":6,"y":0,"width":6,"height":1}},{"id":4027832662915304,"definition":{"title":"System load - past day - $instance-type","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1d"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"1 min load"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"max:system.load.1{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1","alias":"5 min load"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"max:system.load.5{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1","alias":"15 min load"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"max:system.load.15{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":1,"width":3,"height":2}},{"id":4751200523100734,"definition":{"title":"CPU usage (%) - past day - $instance-type","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1d"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"idle"},{"formula":"query2","alias":"system"},{"formula":"query3","alias":"iowait"},{"formula":"query4","alias":"user"},{"formula":"query5","alias":"stolen"},{"formula":"query6","alias":"guest"}],"response_format":"timeseries","queries":[{"query":"avg:system.cpu.idle{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query1"},{"query":"avg:system.cpu.system{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query2"},{"query":"avg:system.cpu.iowait{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query3"},{"query":"avg:system.cpu.user{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query4"},{"query":"avg:system.cpu.stolen{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query5"},{"query":"avg:system.cpu.guest{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query6"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":1,"width":3,"height":2}},{"id":2588758728477936,"definition":{"title":"Host list breakdown table","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Max CPU %","cell_display_mode":"bar","limit":{"count":500,"order":"desc"},"formula":"query1"},{"alias":"# of cores","cell_display_mode":"number","formula":"query2"},{"alias":"Max mem","cell_display_mode":"number","formula":"query3"},{"alias":"Total mem","cell_display_mode":"number","formula":"query4"},{"alias":"Max TX","cell_display_mode":"number","formula":"query5"},{"alias":"Max RX","cell_display_mode":"number","formula":"query6"}],"response_format":"scalar","queries":[{"query":"max:aws.ec2.cpuutilization.maximum{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query1","aggregator":"max"},{"query":"max:system.cpu.num_cores{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:system.mem.used{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query3","aggregator":"max"},{"query":"max:system.mem.total{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query4","aggregator":"max"},{"query":"max:aws.ec2.network_out.maximum{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query5","aggregator":"max"},{"query":"max:aws.ec2.network_in.maximum{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env} by {host,instance-type}","data_source":"metrics","name":"query6","aggregator":"max"}]}],"has_search_bar":"auto"},"layout":{"x":6,"y":1,"width":6,"height":4}},{"id":722722708200196,"definition":{"title":"Network traffic (per sec) - past day - $instance-type","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1d"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"received"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:system.net.bytes_rcvd{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query1"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"formula":"-query1","alias":"sent"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:system.net.bytes_sent{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":3,"width":3,"height":2}},{"id":8822279428606846,"definition":{"title":"System memory - past day - $instance-type","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1d"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"free"},{"formula":"query2 - query1","alias":"used"}],"response_format":"timeseries","queries":[{"query":"sum:system.mem.usable{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query1"},{"query":"sum:system.mem.total{cloud_provider:aws,$aws_account,$availability-zone,$instance-type,$service,$team,$host,$env}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":3,"width":3,"height":2}}]},"layout":{"x":0,"y":25,"width":12,"height":6}}],"template_variables":[{"name":"aws_account","default":"*","prefix":"aws_account","available_values":[]},{"name":"availability-zone","default":"*","prefix":"availability-zone","available_values":[]},{"name":"env","default":"*","prefix":"env","available_values":[]},{"name":"instance-type","default":"*","prefix":"instance-type","available_values":[]},{"name":"service","default":"*","prefix":"service","available_values":[]},{"name":"team","default":"*","prefix":"team","available_values":[]},{"name":"host","default":"*","prefix":"host","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"fixed","id":"c3y-q42-3a9"}
